<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <menuitem id="menu_treasury_root" name="Treasury"/>
        <menuitem id="menu_treasury_check" name="Checks" parent="menu_treasury_root"/>
        <menuitem id="menu_treasury_configuration" name="Configuration" parent="menu_treasury_root"/>

    <!-- Cheques Configuracion -->

        <record model="ir.ui.view" id="view_account_check_config_tree">
            <field name="name">account.check.config.tree</field>
            <field name="model">account.check.config</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Checks Config">
                    <field name="account_id"/>
                    <field name="company_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_account_check_config_form">
            <field name="name">account.check.config.form</field>
            <field name="model">account.check.config</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Check Config">
                    <separator string="Configuration" colspan="4" />
                    <field name="account_id"/>
                    <field name="company_id"/>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_check_config">
            <field name="name">Check Config</field>
            <field name="res_model">account.check.config</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem
            action="action_check_config"
            id="menu_treasury_check_config"
            name="Check Config"
            parent="menu_treasury_configuration"
        />

    <!-- Cheques Emitidos -->

        <record model="ir.ui.view" id="view_account_issued_check_tree">
            <field name="name">account.issued.check.tree</field>
            <field name="model">account.issued.check</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Issued Checks">
                    <field name="number"/>
                    <field name="receiving_partner_id"/>
                    <field name="issue_date"/>
                    <field name="payment_date"/>
                    <field name="account_bank_id" />
                    <field name="bank_id"/>
                    <field name="issued"/>
                    <field name="amount" sum="Total Amount" />
                    <field name="type" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_account_issued_check_form">
            <field name="name">account.issued.check.form</field>
            <field name="model">account.issued.check</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Issued Checks">
                    <field name="receiving_partner_id" invisible="1"/>
                    <field name="number" attrs="{'readonly': [('issued','=',True)]}"/>
                    <field name="type" attrs="{'readonly': [('issued','=',True)]}"/>
                    <group colspan="4" col="6">
                        <field name="account_bank_id" domain="[('bank', '=', bank_id)]" required="1" attrs="{'readonly': [('issued','=',True)]}"/>
                        <field name="bank_id" attrs="{'readonly': [('issued','=',True)]}"/>
                        <field name="clearing" attrs="{'readonly': [('issued','=',True)]}"/>
                    </group>
                    <separator colspan="4" string="Check Information"/>
                    <field name="issue_date" attrs="{'readonly': [('issued','=',True)]}"/>
                    <field name="payment_date" attrs="{'invisible': [('type', '=', 'common')], 'required': [('type','=','postdated')], 'readonly': [('issued','=',True)]}"/>
                    <newline/>
                    <field name="amount" attrs="{'readonly': [('issued','=',True)]}"/>
                </form>
            </field>
        </record>

        <record id="view_account_issued_check_filter" model="ir.ui.view">
            <field name="name">account.issued.check.select</field>
            <field name="model">account.issued.check</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Issued Checks">
                   <group col='10' colspan='4'>
                       <filter icon="terp-check" string="Issued" name="issued"
                           domain="[('issued','=',True)]"/>
                       <filter icon="terp-gnome-cpu-frequency-applet+" string="Post-dated"
                           domain="[('type','=', 'postdated')]"/>
                       <separator orientation="vertical"/>
                       <field name="number"/>
                       <field name="issue_date"/>
                       <field name="receiving_partner_id"/>
                       <newline/>
                       <group expand="0" string="Extended Filters" colspan="10" col="6" groups="base.group_extended">
                           <field name="payment_date"/>
                           <field name="bank_id"/>
                           <field name="amount"/>
                        </group>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="10" col="8" groups="base.group_extended">
                        <filter string="Bank Account" icon="terp-accessories-archiver" domain="[]" context="{'group_by':'account_bank_id'}"/>
                        <filter string="Payment Date" icon="terp-go-month" domain="[]" context="{'group_by':'payment_date'}" help="Payment Date"/>
                        <filter string="Receiving Partner" icon="terp-personal" domain="[]" context="{'group_by':'receiving_partner_id'}"/>
                    </group>
               </search>
            </field>
        </record>

        <record id="view_account_issued_check_issued_calendar" model="ir.ui.view">
            <field name="name">account.issued.check.issued.calendar</field>
            <field name="model">account.issued.check</field>
            <field name="type">calendar</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar color="bank_id" date_start="issue_date" string="Issued Checks">
                    <field name="number"/>
                    <field name="amount"/>
                </calendar>
            </field>
        </record>


    <!-- Tesoreria/Cheques/Cheques Emitidos -->

        <record model="ir.actions.act_window" id="action_issued_check">
            <field name="name">Issued Checks</field>
            <field name="res_model">account.issued.check</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="search_view_id" ref="view_account_issued_check_filter"/>
        </record>

        <menuitem
            action="action_issued_check"
            id="menu_treasury_issued_check"
            name="Issued Checks"
            parent="menu_treasury_check"
        />

    <!-- Third Checks -->

        <record model="ir.ui.view" id="view_account_third_check_tree">
            <field name="name">account.third.check.tree</field>
            <field name="model">account.third.check</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Third Checks">
                    <field name="number"/>
                    <field name="source_partner_id"/>
                    <field name="issue_date"/>
                    <field name="receipt_date"/>
                    <field name="payment_date"/>
                    <field name="destiny_partner_id"/>
                    <field name="endorsement_date"/>
                    <field name="bank_id"/>
                    <field name="amount"/>
                    <field name="deposit_bank_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_account_third_check_form">
            <field name="name">account.third.check.form</field>
            <field name="model">account.third.check</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Third Checks">
                    <field name="number"/>
                    <field name="source_partner_id"/>
                    <field name="destiny_partner_id"/>
                    <field name="amount"/>
                    <field name="receipt_date"/>
                    <field name="issue_date"/>
                    <field name="payment_date"/>
                    <field name="endorsement_date"/>
                    <field name="bank_id"/>
                    <field name="signatory"/>
                    <field name="clearing"/>
                    <field name="origin"/>
                    <field name="deposit_bank_id"/>
                    <field name="state"/>
                </form>
            </field>
        </record>

       <record id="view_third_checks_search" model="ir.ui.view">
            <field name="name">third.check.search</field>
            <field name="model">account.third.check</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Third Checks...">
                    <group colspan='4'>
                        <filter icon="terp-document-new" name="cartera"
                            string="En Cartera" domain="[('state','=','C')]"/>
                        <field name="number" select="1" string="Check Number"/>
                    </group>
                    <group expand="0" string="Group By..." colspan="4"
                        groups="base.group_extended">
                        <filter string="Source Partner" icon="terp-gtk-jump-to-rtl"
                            domain="[]" context="{'group_by':'source_partner_id'}"/>
                        <filter string="Destiny Partner" icon="terp-gtk-jump-to-rtl"
                            domain="[]" context="{'group_by':'destiny_partner_id'}"/>
                    </group>
                </search>
            </field>
        </record>

    <!-- Tesoreria/Cheques/Cheques Emitidos -->

        <record model="ir.actions.act_window" id="action_third_check">
            <field name="name">Third Checks</field>
            <field name="res_model">account.third.check</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem
            action="action_third_check"
            id="menu_treasury_third_check"
            name="Third Checks"
            parent="menu_treasury_check"
        />

    </data>
</openerp>
